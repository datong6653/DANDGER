<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>傳染病防治衛教 - 大同區健康服務中心</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&display=swap');
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #f1f5f9;
        }
        .alert-pulse {
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.4); }
            70% { transform: scale(1.05); box-shadow: 0 0 0 10px rgba(239, 68, 68, 0); }
            100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(239, 68, 68, 0); }
        }
        .custom-scrollbar::-webkit-scrollbar {
            width: 6px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background-color: #cbd5e1;
            border-radius: 10px;
        }
        @media print {
            .no-print { display: none !important; }
            body { background-color: white; }
            .print-card { border: 1px solid #e2e8f0; box-shadow: none !important; }
        }
    </style>
</head>
<body class="text-slate-800 antialiased">

    <!-- Header -->
    <header class="bg-white border-b border-slate-200 sticky top-0 z-50 shadow-sm">
        <div class="max-w-6xl mx-auto px-4 py-3 flex justify-between items-center">
            <div class="flex items-center space-x-3">
                <div class="bg-indigo-600 p-2 rounded-xl shadow-indigo-200 shadow-lg">
                    <i class="fas fa-medkit text-white text-xl"></i>
                </div>
                <div>
                    <h1 class="font-bold text-lg md:text-xl leading-tight text-slate-900">臨床防疫與通報實務指引</h1>
                    <p class="text-[10px] md:text-xs text-slate-500 font-medium tracking-wide">臺北市大同區健康服務中心 ‧ 內部專用</p>
                </div>
            </div>
            <div class="flex items-center space-x-2">
                <span class="hidden md:inline-block bg-red-100 text-red-700 text-[10px] font-bold px-3 py-1 rounded-full alert-pulse border border-red-200">
                    <i class="fas fa-biohazard mr-1"></i> 重點傳染病警戒中
                </span>
                <button onclick="window.print()" class="no-print p-2 text-slate-400 hover:text-indigo-600 transition-colors">
                    <i class="fas fa-print text-lg"></i>
                </button>
            </div>
        </div>
    </header>

    <main class="max-w-6xl mx-auto px-4 py-6">
        <!-- 緊急通知區塊 -->
        <div class="mb-6 bg-gradient-to-r from-red-600 to-red-500 p-1 rounded-2xl shadow-lg">
            <div class="bg-red-50 rounded-[calc(1rem-1px)] p-4 flex items-start">
                <div class="bg-red-100 p-3 rounded-full mr-4 flex-shrink-0">
                    <i class="fas fa-bullhorn text-red-600 animate-bounce"></i>
                </div>
                <div>
                    <h3 class="font-bold text-red-900 mb-1">關鍵防疫提示：發燒且出疹 (Fever & Rash)</h3>
                    <p class="text-sm text-red-800 leading-relaxed">
                        臨床遇有發燒、皮疹個案，請務必同時評估「<span class="font-bold underline">麻疹</span>」與「<span class="font-bold underline">登革熱</span>」之可能性。落實早期通報，避免院內感染擴散。
                    </p>
                </div>
            </div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-12 gap-6">
            
            <!-- 左側：臨床判定工具 -->
            <div class="lg:col-span-4 space-y-6">
                <div class="bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden sticky top-24">
                    <div class="p-4 bg-slate-50 border-b border-slate-200 flex justify-between items-center">
                        <h2 class="font-bold text-slate-800 flex items-center">
                            <i class="fas fa-clipboard-list text-indigo-600 mr-2"></i> 快速判定工具
                        </h2>
                        <span class="text-[10px] bg-indigo-100 text-indigo-700 px-2 py-0.5 rounded font-bold">Ver 1.2</span>
                    </div>
                    
                    <div class="p-5 space-y-5">
                        <!-- 第一階段：共通症狀 -->
                        <div>
                            <p class="text-[11px] font-bold text-slate-400 uppercase tracking-widest mb-3">STEP 1. 共通症狀評估</p>
                            <div class="grid grid-cols-1 gap-2">
                                <label class="flex items-center p-3 rounded-xl border border-slate-200 hover:bg-slate-50 transition-all cursor-pointer group">
                                    <input type="checkbox" id="check_fever" class="h-5 w-5 text-indigo-600 border-slate-300 rounded focus:ring-indigo-500">
                                    <span class="ml-3 font-medium text-slate-700 group-hover:text-indigo-700">發燒 (Temp &ge; 38&deg;C)</span>
                                </label>
                                <label class="flex items-center p-3 rounded-xl border border-slate-200 hover:bg-slate-50 transition-all cursor-pointer group">
                                    <input type="checkbox" id="check_rash" class="h-5 w-5 text-indigo-600 border-slate-300 rounded focus:ring-indigo-500">
                                    <span class="ml-3 font-medium text-slate-700 group-hover:text-indigo-700">皮膚出現皮疹 / 紅疹</span>
                                </label>
                            </div>
                        </div>

                        <!-- 第二階段：差異化評估 -->
                        <div>
                            <p class="text-[11px] font-bold text-slate-400 uppercase tracking-widest mb-3">STEP 2. 鑑別診斷加強項</p>
                            <div class="space-y-2">
                                <label class="flex items-start p-3 rounded-xl bg-blue-50/50 border border-blue-100 cursor-pointer">
                                    <input type="checkbox" class="diff-cond h-4 w-4 mt-1 text-blue-600 border-blue-300 rounded">
                                    <div class="ml-3">
                                        <p class="text-sm font-bold text-blue-900">麻疹傾向</p>
                                        <p class="text-[11px] text-blue-700">咳嗽、流鼻水、結膜炎 (3C) 或 柯氏斑</p>
                                    </div>
                                </label>
                                <label class="flex items-start p-3 rounded-xl bg-emerald-50/50 border border-emerald-100 cursor-pointer">
                                    <input type="checkbox" class="diff-cond h-4 w-4 mt-1 text-emerald-600 border-emerald-300 rounded">
                                    <div class="ml-3">
                                        <p class="text-sm font-bold text-emerald-900">登革熱傾向</p>
                                        <p class="text-[11px] text-emerald-700">後眼窩痛、肌肉關節痛、具流行區旅遊史</p>
                                    </div>
                                </label>
                            </div>
                        </div>

                        <!-- 動態結果顯示 -->
                        <div id="decisionResult" class="mt-4">
                            <div class="p-4 rounded-xl bg-slate-100 border border-slate-200 text-center border-dashed">
                                <p class="text-xs text-slate-500">請勾選上方症狀以獲取行動建議</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 右側：防疫指引詳情 -->
            <div class="lg:col-span-8 space-y-6">
                
                <!-- SOP 流程 -->
                <section class="bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden">
                    <div class="p-5 border-b border-slate-100 bg-white">
                        <h2 class="font-bold text-lg flex items-center">
                            <span class="w-2 h-6 bg-indigo-600 rounded-full mr-3"></span>
                            感管與通報作業流程
                        </h2>
                    </div>
                    <div class="p-6">
                        <div class="relative">
                            <!-- 連接線 (桌面版) -->
                            <div class="hidden md:block absolute left-1/2 top-0 bottom-0 w-0.5 bg-slate-100 -translate-x-1/2"></div>
                            
                            <div class="space-y-8 relative">
                                <!-- Step 1 -->
                                <div class="flex flex-col md:flex-row items-center">
                                    <div class="md:w-1/2 md:pr-10 text-right hidden md:block">
                                        <h4 class="font-bold text-slate-800">落實 TOCC 詢問</h4>
                                        <p class="text-xs text-slate-500">旅遊史、職業史、接觸史、群聚史</p>
                                    </div>
                                    <div class="z-10 bg-indigo-600 text-white w-10 h-10 rounded-full flex items-center justify-center font-bold shadow-lg shadow-indigo-200">1</div>
                                    <div class="md:w-1/2 md:pl-10 mt-2 md:mt-0">
                                        <h4 class="font-bold text-slate-800 md:hidden">落實 TOCC 詢問</h4>
                                        <div class="bg-slate-50 p-3 rounded-xl border border-slate-100 text-sm text-slate-600">
                                            發現疑似個案應即刻配戴<strong>外科口罩</strong>，並引導至獨立通風空間。
                                        </div>
                                    </div>
                                </div>

                                <!-- Step 2 -->
                                <div class="flex flex-col md:flex-row items-center">
                                    <div class="md:w-1/2 md:pr-10 text-right mt-2 md:mt-0 order-2 md:order-1">
                                        <h4 class="font-bold text-slate-800 md:hidden">24 小時內通報</h4>
                                        <div class="bg-indigo-50 p-3 rounded-xl border border-indigo-100 text-sm text-indigo-700">
                                            使用健保網域 (VPN) <strong>免帳號通報</strong> 入口進行快速登錄。
                                        </div>
                                    </div>
                                    <div class="z-10 bg-indigo-600 text-white w-10 h-10 rounded-full flex items-center justify-center font-bold shadow-lg shadow-indigo-200 order-1 md:order-2">2</div>
                                    <div class="md:w-1/2 md:pl-10 hidden md:block order-3">
                                        <h4 class="font-bold text-slate-800">24 小時內通報</h4>
                                        <p class="text-xs text-slate-500">法定傳染病通報系統</p>
                                    </div>
                                </div>

                                <!-- Step 3 -->
                                <div class="flex flex-col md:flex-row items-center">
                                    <div class="md:w-1/2 md:pr-10 text-right hidden md:block">
                                        <h4 class="font-bold text-slate-800">環境與接觸者管理</h4>
                                        <p class="text-xs text-slate-500">診間清消與人員監測</p>
                                    </div>
                                    <div class="z-10 bg-indigo-600 text-white w-10 h-10 rounded-full flex items-center justify-center font-bold shadow-lg shadow-indigo-200">3</div>
                                    <div class="md:w-1/2 md:pl-10 mt-2 md:mt-0">
                                        <h4 class="font-bold text-slate-800 md:hidden">環境與接觸者管理</h4>
                                        <div class="bg-slate-50 p-3 rounded-xl border border-slate-100 text-sm text-slate-600">
                                            診間靜置 <strong>2 小時</strong> 並加強通報接觸者名單至衛生單位。
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- 防護指引表格 -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div class="bg-white p-5 rounded-2xl shadow-sm border border-slate-200">
                        <div class="flex items-center mb-4">
                            <div class="p-2 bg-amber-100 text-amber-700 rounded-lg mr-3">
                                <i class="fas fa-user-md"></i>
                            </div>
                            <h3 class="font-bold">醫護端保護</h3>
                        </div>
                        <ul class="text-sm space-y-2 text-slate-600">
                            <li class="flex items-start"><i class="fas fa-check-circle text-emerald-500 mt-1 mr-2 text-xs"></i>確認 MMR 疫苗免疫史</li>
                            <li class="flex items-start"><i class="fas fa-check-circle text-emerald-500 mt-1 mr-2 text-xs"></i>落實標準防護與空氣預防措施</li>
                            <li class="flex items-start"><i class="fas fa-check-circle text-emerald-500 mt-1 mr-2 text-xs"></i>接觸後自主健康監測 21 天</li>
                        </ul>
                    </div>
                    <div class="bg-white p-5 rounded-2xl shadow-sm border border-slate-200">
                        <div class="flex items-center mb-4">
                            <div class="p-2 bg-blue-100 text-blue-700 rounded-lg mr-3">
                                <i class="fas fa-users"></i>
                            </div>
                            <h3 class="font-bold">民眾端衛教</h3>
                        </div>
                        <ul class="text-sm space-y-2 text-slate-600">
                            <li class="flex items-start"><i class="fas fa-info-circle text-blue-500 mt-1 mr-2 text-xs"></i>宣導按時接種兩劑 MMR</li>
                            <li class="flex items-start"><i class="fas fa-info-circle text-blue-500 mt-1 mr-2 text-xs"></i>疑似症狀者就醫前應先電話告知</li>
                            <li class="flex items-start"><i class="fas fa-info-circle text-blue-500 mt-1 mr-2 text-xs"></i>避免出入人潮擁擠場所</li>
                        </ul>
                    </div>
                </div>

                <!-- 聯絡窗口 (參考上傳文件) -->
                <section class="bg-slate-900 text-white rounded-2xl p-6 shadow-xl">
                    <div class="flex flex-col md:flex-row justify-between items-center space-y-6 md:space-y-0">
                        <div>
                            <h3 class="font-bold text-xl mb-2 flex items-center">
                                <i class="fas fa-phone-volume mr-3 text-indigo-400"></i> 通報聯絡專線
                            </h3>
                            <p class="text-slate-400 text-sm">若通報系統無法使用，請先以紙本傳真並致電確認。</p>
                        </div>
                        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 w-full md:w-auto">
                            <div class="bg-slate-800 p-4 rounded-xl border border-slate-700">
                                <p class="text-[10px] text-slate-500 uppercase font-bold mb-1">傳真通報專線</p>
                                <p class="text-lg font-bold text-white">02-23611487</p>
                            </div>
                            <div class="bg-slate-800 p-4 rounded-xl border border-slate-700">
                                <p class="text-[10px] text-slate-500 uppercase font-bold mb-1">防疫確認電話</p>
                                <p class="text-lg font-bold text-indigo-400">02-23753782</p>
                            </div>
                        </div>
                    </div>
                </section>

                <footer class="text-center py-6 text-slate-400 text-xs">
                    <p>© 2026 大同區健康服務中心 | 防疫一體 ‧ 守護社區</p>
                    <p class="mt-2">更新日期：2026年01月07日</p>
                </footer>
            </div>
        </div>
    </main>

    <script>
        const checkFever = document.getElementById('check_fever');
        const checkRash = document.getElementById('check_rash');
        const diffConds = document.querySelectorAll('.diff-cond');
        const resultBox = document.getElementById('decisionResult');

        function updateDecision() {
            const hasFever = checkFever.checked;
            const hasRash = checkRash.checked;
            let extraChecked = 0;
            diffConds.forEach(c => { if(c.checked) extraChecked++; });

            if (!hasFever && !hasRash && extraChecked === 0) {
                resultBox.innerHTML = `
                    <div class="p-4 rounded-xl bg-slate-100 border border-slate-200 text-center border-dashed">
                        <p class="text-xs text-slate-500">請勾選上方症狀以獲取行動建議</p>
                    </div>
                `;
                return;
            }

            if (hasFever && hasRash && extraChecked > 0) {
                resultBox.innerHTML = `
                    <div class="bg-red-50 border border-red-200 rounded-xl p-4 shadow-sm animate-in fade-in slide-in-from-top-1">
                        <div class="flex items-center mb-3">
                            <span class="bg-red-600 text-white p-1.5 rounded-lg text-xs font-bold mr-2">高度警訊</span>
                            <span class="text-sm font-bold text-red-700 font-bold">符合通報定義</span>
                        </div>
                        <ul class="text-[12px] text-red-800 space-y-2 mb-4">
                            <li><i class="fas fa-angle-right mr-1"></i> 請於 <strong>24小時內</strong> 完成法定通報。</li>
                            <li><i class="fas fa-angle-right mr-1"></i> 立即執行 <strong>標準/飛沫/空氣預防</strong>。</li>
                            <li><i class="fas fa-angle-right mr-1"></i> 登革熱流行期請同時執行 <strong>NS1快篩</strong>。</li>
                        </ul>
                        <button onclick="window.scrollTo({top: 1000, behavior: 'smooth'})" class="w-full bg-red-600 text-white py-2 rounded-lg text-xs font-bold hover:bg-red-700 transition-colors">
                            檢視通報聯繫方式
                        </button>
                    </div>
                `;
            } else if (hasFever || hasRash) {
                resultBox.innerHTML = `
                    <div class="bg-amber-50 border border-amber-200 rounded-xl p-4 shadow-sm">
                        <div class="flex items-center mb-2">
                            <i class="fas fa-search text-amber-600 mr-2"></i>
                            <span class="text-sm font-bold text-amber-800 font-bold">密切觀察中</span>
                        </div>
                        <p class="text-[12px] text-amber-700 leading-relaxed italic">
                            雖未完全符合「發燒+出疹+加強項」之通報門檻，但仍建議執行 TOCC 追蹤，並提醒病患若出現 3C 症狀或劇烈疼痛請立即複診。
                        </p>
                    </div>
                `;
            } else {
                resultBox.innerHTML = `
                    <div class="bg-indigo-50 border border-indigo-200 rounded-xl p-4 shadow-sm">
                        <div class="flex items-center mb-1 text-indigo-700">
                            <i class="fas fa-info-circle mr-2"></i>
                            <span class="text-sm font-bold">單一加強項</span>
                        </div>
                        <p class="text-[11px] text-indigo-600">請繼續評估發燒與皮疹進程。</p>
                    </div>
                `;
            }
        }

        [checkFever, checkRash].forEach(el => el.addEventListener('change', updateDecision));
        diffConds.forEach(el => el.addEventListener('change', updateDecision));
    </script>
</body>
</html>